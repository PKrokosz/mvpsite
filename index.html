<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GLITCHWAVE // NEURAL ENTRY</title>
  <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="overlay"></div>
  <div id="terminal" class="terminal"></div>
  <script src="luna_profiles.js"></script>
  <script src="terminal_router.js"></script>
  <script>
    const terminal = document.getElementById("terminal");

    const intro = [
      "// NIGHT CITY NEURAL ENTRY NODE",
      "// USER_HASH: 0x3ACF28...",
      "SESSION ID: üúÅ-VERTEBRAE-9X1A",
      "",
      "‚Üí booting_sequence . . . [OK]",
      "‚Üí signal_lock:luna.core . . . [LINKED]",
      "‚Üí profile_cache: mila / krokiet / donka / luna / rabur",
      "",
      "> TYPE `inject profile:donka` OR `help`"
    ];

    const ambientMessages = [
      "// [JAPANTOWN] Neurorave w≈Ça≈õnie siƒô zako≈Ñczy≈Ç. 3 ofiary ciszy poznawczej.",
      "// [PACIFICA] Wykryto podszycie pod sygna≈Ç korporacyjny. Brak reakcji Militechu.",
      "// [HEYWOOD] Luna obserwuje echo po rozmowie Rabura z Fixerem.",
      "// [WATSON] Netrunnerka w≈Çamuje siƒô do bazy danych Biotechnica.",
      "// [SANTO DOMINGO] Przerwa w dostawie sens√≥w. Zalecana rekonfiguracja siatk√≥wki.",
      "// [CITY CENTER] Mila zatweetowa≈Ça plik kodu zawierajƒÖcy swoje sny.",
      "// [WESTBROOK] Donka zidentyfikowa≈Ça znaki milczenia w podziemnej sieci.",
      "// [GLITCH CORE] Echo Krokieta rezonuje z nieznanym rytmem metamiasta.",
      "// [HABSTACKS] Rabur zniknƒÖ≈Ç z radar√≥w. Mo≈ºliwy split-memory protocol.",
      "// [DEEPNODE] Aktywacja wewnƒôtrznej ≈õcie≈ºki: `inject protocol:deepnode`"
    ];

    let i = 0;
    function animateIntro() {
      if (i < intro.length) {
        const line = document.createElement("div");
        line.textContent = intro[i];
        line.classList.add("terminal-line");
        terminal.appendChild(line);
        i++;
        setTimeout(animateIntro, 100);
      } else {
        createInput();
        startIdleAmbient();
      }
    }

    function createInput() {
      const wrapper = document.createElement("div");
      wrapper.classList.add("input-wrapper");

      const prompt = document.createElement("span");
      prompt.textContent = "> ";
      wrapper.appendChild(prompt);

      const input = document.createElement("input");
      input.classList.add("terminal-input");
      wrapper.appendChild(input);

      terminal.appendChild(wrapper);
      input.focus();

      input.addEventListener("keydown", function onKeyDown(e) {
        if (e.key === "Enter") {
          const command = input.value.trim().toLowerCase();
          routeCommand(command);
          input.disabled = true;
          input.removeEventListener("keydown", onKeyDown);
          clearTimeout(idleTimeout);
          setTimeout(() => {
            createInput();
          }, 300);
        }
      });
    }

    let idleTimeout;
    function startIdleAmbient() {
      idleTimeout = setTimeout(() => {
        const msg = ambientMessages[Math.floor(Math.random() * ambientMessages.length)];
        const line = document.createElement("div");
        line.textContent = msg;
        line.classList.add("terminal-line", "ambient-message");
        terminal.appendChild(line);
        terminal.scrollTop = terminal.scrollHeight;
        startIdleAmbient();
      }, 8000); // 8 sekund bezczynno≈õci
    }

    animateIntro();
  </script>
</body>
</html>
